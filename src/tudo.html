<!DOCTYPE html>
<html lang="pt-BR">
@@include("_partials/head.html")
<body class="bg-gradient-to-b from-slate-50 via-white to-slate-50 text-slate-800 antialiased">

  <header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-slate-200/60">
  <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
    <a href="index.html" class="flex items-center gap-2">
      <img src="assets/logo-monogram-512.png" alt="Nando" class="w-8 h-8 rounded-lg"/>
      <span class="font-extrabold tracking-tight text-slate-900">Nando Importados</span>
    </a>

    <!-- Busca (apenas linka pro tudo com ?q=) -->
    <form action="tudo.html" method="get" class="hidden md:flex items-center gap-2 w-[48%]">
      <input name="q" type="search" placeholder="Buscar produtos…"
             class="flex-1 rounded-xl border border-slate-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-sky-400/50">
      <button class="px-3 py-2 rounded-xl bg-sky-500 text-white font-semibold hover:brightness-110">Buscar</button>
    </form>

    <!-- Navegação -->
    <nav class="hidden md:flex items-center gap-4">
      <a href="tudo.html" class="px-3 py-1.5 rounded-lg font-semibold text-slate-700 hover:text-sky-600">Catálogo</a>
      <a href="celulares.html" class="px-3 py-1.5 rounded-lg font-semibold text-slate-700 hover:text-sky-600">Celulares</a>
      <a href="perfumes.html" class="px-3 py-1.5 rounded-lg font-semibold text-slate-700 hover:text-sky-600">Perfumes</a>
      <a href="contato.html" class="px-3 py-1.5 rounded-lg font-semibold text-white bg-emerald-500 hover:brightness-110">Contato</a>
    </nav>

    <!-- Menu mobile -->
    <button id="btnMenu" class="md:hidden p-2 rounded-lg border border-slate-200" aria-label="Abrir menu">
      ☰
    </button>
  </div>

  <div id="mobileMenu" class="md:hidden hidden border-t border-slate-200 bg-white">
    <div class="px-4 py-3 space-y-2">
      <form action="tudo.html" class="flex items-center gap-2">
        <input name="q" type="search" placeholder="Buscar produtos…"
               class="flex-1 rounded-xl border border-slate-200 px-3 py-2 focus:outline-none">
        <button class="px-3 py-2 rounded-xl bg-sky-500 text-white font-semibold">Buscar</button>
      </form>
      <a href="tudo.html" class="block px-3 py-2 rounded-lg font-semibold text-slate-700 hover:bg-slate-50">Catálogo</a>
      <a href="celulares.html" class="block px-3 py-2 rounded-lg font-semibold text-slate-700 hover:bg-slate-50">Celulares</a>
      <a href="perfumes.html" class="block px-3 py-2 rounded-lg font-semibold text-slate-700 hover:bg-slate-50">Perfumes</a>
      <a href="contato.html" class="block px-3 py-2 rounded-lg font-semibold text-white bg-emerald-500">Contato</a>
    </div>
  </div>

  <script>
    (function(){
      const btn = document.getElementById('btnMenu');
      const menu = document.getElementById('mobileMenu');
      if(!btn || !menu) return;
      btn.addEventListener('click', ()=> menu.classList.toggle('hidden'));
      // marca ativo
      const path = location.pathname.split('/').pop();
      document.querySelectorAll('nav a, #mobileMenu a').forEach(a=>{
        const href = a.getAttribute('href');
        if (href && path === href) {
          a.classList.add('text-sky-600');
        }
      });
    })();
  </script>
</header>


  <!-- ===================== HERO (Carrossel – Geral) ===================== -->
  <section id="catHero" class="relative overflow-hidden select-none">
    <div class="relative w-full aspect-[21/9] md:aspect-[16/7] lg:aspect-[16/6]">
      <ul id="catHeroSlides" class="absolute inset-0">
        <!-- Slide 1 (eager/high) -->
        <li class="absolute inset-0 opacity-100 transition-opacity duration-700">
          <picture>
            <!-- Desktop (>=1024px) -->
            <source type="image/webp" media="(min-width:1024px)"
                    srcset="assets/banners/geral/hero-all-1-desktop-1280.webp 1280w,
                            assets/banners/geral/hero-all-1-desktop-1920.webp 1920w" sizes="100vw">
            <source type="image/jpeg" media="(min-width:1024px)"
                    srcset="assets/banners/geral/hero-all-1-desktop-1280.jpg 1280w,
                            assets/banners/geral/hero-all-1-desktop-1920.jpg 1920w" sizes="100vw">
            <!-- Mobile -->
            <source type="image/webp"
                    srcset="assets/banners/geral/hero-all-1-mobile-640.webp 640w,
                            assets/banners/geral/hero-all-1-mobile-960.webp 960w" sizes="100vw">
            <source type="image/jpeg"
                    srcset="assets/banners/geral/hero-all-1-mobile-640.jpg 640w,
                            assets/banners/geral/hero-all-1-mobile-960.jpg 960w" sizes="100vw">
            <!-- Fallback (mantém seu arquivo atual) -->
            <img src="assets/banners/geral/hero-all-1.jpg"
                 alt="Ofertas especiais — Nando Importados"
                 class="absolute inset-0 w-full h-full object-cover z-0"
                 loading="eager" decoding="async" fetchpriority="high">
          </picture>
          <div class="absolute inset-0 z-10 bg-gradient-to-b from-black/10 via-black/35 to-black/60"></div>
        </li>

        <!-- Slide 2 (lazy) -->
        <li class="absolute inset-0 opacity-0 transition-opacity duration-700">
          <picture>
            <source type="image/webp" media="(min-width:1024px)"
                    srcset="assets/banners/geral/hero-all-2-desktop-1280.webp 1280w,
                            assets/banners/geral/hero-all-2-desktop-1920.webp 1920w" sizes="100vw">
            <source type="image/jpeg" media="(min-width:1024px)"
                    srcset="assets/banners/geral/hero-all-2-desktop-1280.jpg 1280w,
                            assets/banners/geral/hero-all-2-desktop-1920.jpg 1920w" sizes="100vw">
            <source type="image/webp"
                    srcset="assets/banners/geral/hero-all-2-mobile-640.webp 640w,
                            assets/banners/geral/hero-all-2-mobile-960.webp 960w" sizes="100vw">
            <source type="image/jpeg"
                    srcset="assets/banners/geral/hero-all-2-mobile-640.jpg 640w,
                            assets/banners/geral/hero-all-2-mobile-960.jpg 960w" sizes="100vw">
            <img src="assets/banners/geral/hero-all-2.jpg"
                 alt="Celulares e perfumes com NF e garantia"
                 class="absolute inset-0 w-full h-full object-cover z-0"
                 loading="lazy" decoding="async">
          </picture>
          <div class="absolute inset-0 z-10 bg-gradient-to-b from-black/10 via-black/35 to-black/60"></div>
        </li>

        <!-- Slide 3 (lazy) -->
        <li class="absolute inset-0 opacity-0 transition-opacity duration-700">
          <picture>
            <source type="image/webp" media="(min-width:1024px)"
                    srcset="assets/banners/geral/hero-all-3-desktop-1280.webp 1280w,
                            assets/banners/geral/hero-all-3-desktop-1920.webp 1920w" sizes="100vw">
            <source type="image/jpeg" media="(min-width:1024px)"
                    srcset="assets/banners/geral/hero-all-3-desktop-1280.jpg 1280w,
                            assets/banners/geral/hero-all-3-desktop-1920.jpg 1920w" sizes="100vw">
            <source type="image/webp"
                    srcset="assets/banners/geral/hero-all-3-mobile-640.webp 640w,
                            assets/banners/geral/hero-all-3-mobile-960.webp 960w" sizes="100vw">
            <source type="image/jpeg"
                    srcset="assets/banners/geral/hero-all-3-mobile-640.jpg 640w,
                            assets/banners/geral/hero-all-3-mobile-960.jpg 960w" sizes="100vw">
            <img src="assets/banners/geral/hero-all-3.jpg"
                 alt="Atendimento no WhatsApp — Nando Importados"
                 class="absolute inset-0 w-full h-full object-cover z-0"
                 loading="lazy" decoding="async">
          </picture>
          <div class="absolute inset-0 z-10 bg-gradient-to-b from-black/10 via-black/35 to-black/60"></div>
        </li>
      </ul>

      <!-- Dots -->
      <div class="absolute bottom-3 left-1/2 -translate-x-1/2 flex items-center gap-2 z-30">
        <button class="hero-dot" aria-current="true" aria-label="Slide 1"></button>
        <button class="hero-dot" aria-label="Slide 2"></button>
        <button class="hero-dot" aria-label="Slide 3"></button>
      </div>
    </div>
  </section>
  <!-- ===================== /HERO ===================== -->

  <!-- ===================== BARRA DE FILTROS (STICKY) ===================== -->
  <section class="bg-white/75 backdrop-blur supports-[backdrop-filter]:bg-white/60 border-b border-slate-200 sticky top-14 z-40">
    <div class="max-w-6xl mx-auto px-4 py-3 flex flex-wrap items-center gap-3">

      <!-- Busca -->
      <div class="relative flex-1 min-w-[240px]">
        <input id="search"
               class="w-full rounded-xl border border-slate-300/70 bg-white px-4 py-2.5 pr-9 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/30"
               type="search" placeholder="Buscar (ex: iPhone 13, POCO X7, Sauvage, EDP…)">
        <svg class="absolute right-3 top-2.5 opacity-60" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="m21 21-4.3-4.3M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="#334155" stroke-width="1.8" stroke-linecap="round"/></svg>
      </div>

      <!-- Categoria -->
      <div class="flex flex-wrap gap-2">
        <button class="chip active" data-cat="all">Tudo</button>
        <button class="chip" data-cat="celulares">Celulares</button>
        <button class="chip" data-cat="perfumes">Perfumes</button>
      </div>

      <!-- Marca (dinâmico por categoria) -->
      <div>
        <select id="brand" class="rounded-xl border border-slate-300/70 bg-white px-3 py-2 text-sm">
          <option value="all">Todas as marcas</option>
          <!-- celulares -->
          <option value="apple" data-for="celulares">Apple</option>
          <option value="samsung" data-for="celulares">Samsung</option>
          <option value="xiaomi" data-for="celulares">Xiaomi / POCO</option>
          <option value="motorola" data-for="celulares">Motorola</option>
          <!-- perfumes -->
          <option value="dior" data-for="perfumes">Dior</option>
          <option value="versace" data-for="perfumes">Versace</option>
          <option value="chanel" data-for="perfumes">Chanel</option>
          <option value="paco" data-for="perfumes">Paco Rabanne</option>
          <option value="ysl" data-for="perfumes">YSL</option>
          <option value="lancome" data-for="perfumes">Lancôme</option>
          <option value="carolina" data-for="perfumes">Carolina Herrera</option>
        </select>
      </div>

      <!-- Ordenação -->
      <div class="ml-auto">
        <select id="sort" class="rounded-xl border border-slate-300/70 bg-white px-3 py-2 text-sm">
          <option value="featured">Ordem padrão do filtro</option>
          <option value="price-asc">Menor preço</option>
          <option value="price-desc">Maior preço</option>
          <option value="newest">Mais novos</option>
        </select>
      </div>
    </div>
  </section>
  <!-- ===================== /FILTROS ===================== -->

  <!-- ===================== GRID ===================== -->
  <main class="max-w-6xl mx-auto px-4 py-8">
    <div class="mb-4 text-sm text-slate-600">
      <span id="countVisible">0</span> item(ns) exibido(s)
      · <a href="celulares.html" class="text-blue-700 underline underline-offset-2">Ver celulares</a>
      · <a href="perfumes.html" class="text-blue-700 underline underline-offset-2">Ver perfumes</a>
    </div>

    <div id="gridProdutos" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- ==================== CELULARES ==================== -->

      <!-- POCO X7 PRO -->
      <article class="offer-card rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden"
               data-cat="celulares" data-brand="xiaomi" data-price="1899" data-new="2024-04-01"
               data-search="poco x7 pro 8gb 256gb snapdragon 7s gen 2 celular android smartphone">
        <img src="assets/celulares/poco-x7-pro.jpg" alt="POCO X7 PRO"
             class="w-full h-52 object-cover"
             onerror="this.onerror=null;this.src='assets/celulares/fallback-celular.jpg'">
        <div class="p-5">
          <h2 class="font-bold text-lg">POCO X7 PRO</h2>
          <p class="text-sm text-slate-600">8GB · 256GB · Snapdragon 7s Gen 2</p>
          <div class="mt-3">
            <div class="price-strike text-xs">R$ 2.199</div>
            <div class="text-xl font-extrabold text-blue-700">R$ 1.899</div>
          </div>
          <a class="btn-wa mt-4 w-full" data-wa-product="POCO X7 PRO">Falar no WhatsApp</a>
        </div>
      </article>

      <!-- iPhone 13 -->
      <article class="offer-card rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden"
               data-cat="celulares" data-brand="apple" data-price="3299" data-new="2024-03-10"
               data-search="iphone 13 128gb ios apple celular smartphone 6.1 polegadas">
        <img src="assets/celulares/iphone-13.jpg" alt="iPhone 13 128GB"
             class="w-full h-52 object-cover"
             onerror="this.onerror=null;this.src='assets/celulares/fallback-celular.jpg'">
        <div class="p-5">
          <h2 class="font-bold text-lg">iPhone 13 (128GB)</h2>
          <p class="text-sm text-slate-600">Tela 6.1"</p>
          <div class="mt-3">
            <div class="price-strike text-xs">R$ 3.499</div>
            <div class="text-xl font-extrabold text-blue-700">R$ 3.299</div>
          </div>
          <a class="btn-wa mt-4 w-full" data-wa-product="iPhone 13 128GB">Falar no WhatsApp</a>
        </div>
      </article>

      <!-- Moto G84 -->
      <article class="offer-card rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden"
               data-cat="celulares" data-brand="motorola" data-price="1699" data-new="2024-02-22"
               data-search="motorola moto g84 256gb 12gb ram android celular smartphone">
        <img src="assets/celulares/moto-g84.jpg" alt="Moto G84"
             class="w-full h-52 object-cover"
             onerror="this.onerror=null;this.src='assets/celulares/fallback-celular.jpg'">
        <div class="p-5">
          <h2 class="font-bold text-lg">Moto G84</h2>
          <p class="text-sm text-slate-600">12GB · 256GB · 5G</p>
          <div class="mt-3">
            <div class="price-strike text-xs">R$ 1.899</div>
            <div class="text-xl font-extrabold text-blue-700">R$ 1.699</div>
          </div>
          <a class="btn-wa mt-4 w-full" data-wa-product="Moto G84">Falar no WhatsApp</a>
        </div>
      </article>

      <!-- Galaxy A34 -->
      <article class="offer-card rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden"
               data-cat="celulares" data-brand="samsung" data-price="1499" data-new="2024-04-20"
               data-search="samsung galaxy a34 128gb android celular smartphone">
        <img src="assets/celulares/galaxy-a34.jpg" alt="Galaxy A34"
             class="w-full h-52 object-cover"
             onerror="this.onerror=null;this.src='assets/celulares/fallback-celular.jpg'">
        <div class="p-5">
          <h2 class="font-bold text-lg">Galaxy A34</h2>
          <p class="text-sm text-slate-600">128GB · Novo lacrado</p>
          <div class="mt-3">
            <div class="price-strike text-xs">R$ 1.699</div>
            <div class="text-xl font-extrabold text-blue-700">R$ 1.499</div>
          </div>
          <a class="btn-wa mt-4 w-full" data-wa-product="Galaxy A34">Falar no WhatsApp</a>
        </div>
      </article>

      <!-- ==================== PERFUMES ==================== -->

      <!-- Dior Sauvage -->
      <article class="offer-card rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden"
               data-cat="perfumes" data-brand="dior" data-price="649" data-new="2024-04-01"
               data-search="dior sauvage eau de toilette edt 100ml masculino fresco amadeirado">
        <img src="assets/perfumes/dior-sauvage.jpg" alt="Dior Sauvage EDT 100ml"
             class="w-full h-52 object-cover"
             onerror="this.onerror=null;this.src='assets/perfumes/fallback-perfume.jpg'">
        <div class="p-5">
          <h2 class="font-bold text-lg">Dior Sauvage EDT 100ml</h2>
          <p class="text-sm text-slate-600">Masculino · Fresco amadeirado</p>
          <div class="mt-3">
            <div class="price-strike text-xs">R$ 699</div>
            <div class="text-xl font-extrabold text-blue-700">R$ 649</div>
          </div>
          <a class="btn-wa mt-4 w-full" data-wa-product="Dior Sauvage EDT 100ml">Falar no WhatsApp</a>
        </div>
      </article>

      <!-- Dylan Blue -->
      <article class="offer-card rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden"
               data-cat="perfumes" data-brand="versace" data-price="549" data-new="2024-03-12"
               data-search="versace dylan blue 100ml masculino fougere moderno">
        <img src="assets/perfumes/versace-dylan-blue.jpg" alt="Versace Dylan Blue 100ml"
             class="w-full h-52 object-cover"
             onerror="this.onerror=null;this.src='assets/perfumes/fallback-perfume.jpg'">
        <div class="p-5">
          <h2 class="font-bold text-lg">Versace Dylan Blue 100ml</h2>
          <p class="text-sm text-slate-600">Masculino · Aromático</p>
          <div class="mt-3">
            <div class="price-strike text-xs">R$ 599</div>
            <div class="text-xl font-extrabold text-blue-700">R$ 549</div>
          </div>
          <a class="btn-wa mt-4 w-full" data-wa-product="Versace Dylan Blue 100ml">Falar no WhatsApp</a>
        </div>
      </article>

      <!-- Bleu de Chanel -->
      <article class="offer-card rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden"
               data-cat="perfumes" data-brand="chanel" data-price="1099" data-new="2024-01-30"
               data-search="bleu de chanel eau de parfum edp 100ml masculino amadeirado citrico">
        <img src="assets/perfumes/bleu-de-chanel.jpg" alt="Bleu de Chanel EDP 100ml"
             class="w-full h-52 object-cover"
             onerror="this.onerror=null;this.src='assets/perfumes/fallback-perfume.jpg'">
        <div class="p-5">
          <h2 class="font-bold text-lg">Bleu de Chanel EDP 100ml</h2>
          <p class="text-sm text-slate-600">Masculino · Amadeirado</p>
          <div class="mt-3">
            <div class="price-strike text-xs">R$ 1.199</div>
            <div class="text-xl font-extrabold text-blue-700">R$ 1.099</div>
          </div>
          <a class="btn-wa mt-4 w-full" data-wa-product="Bleu de Chanel EDP 100ml">Falar no WhatsApp</a>
        </div>
      </article>

      <!-- YSL Libre -->
      <article class="offer-card rounded-2xl bg-white border border-slate-200 shadow-sm overflow-hidden"
               data-cat="perfumes" data-brand="ysl" data-price="799" data-new="2024-03-22"
               data-search="ysl libre eau de parfum edp 90ml feminino floral baunilha lavanda">
        <img src="assets/perfumes/ysl-libre.jpg" alt="YSL Libre EDP 90ml"
             class="w-full h-52 object-cover"
             onerror="this.onerror=null;this.src='assets/perfumes/fallback-perfume.jpg'">
        <div class="p-5">
          <h2 class="font-bold text-lg">YSL Libre EDP 90ml</h2>
          <p class="text-sm text-slate-600">Feminino · Floral</p>
          <div class="mt-3">
            <div class="price-strike text-xs">R$ 869</div>
            <div class="text-xl font-extrabold text-blue-700">R$ 799</div>
          </div>
          <a class="btn-wa mt-4 w-full" data-wa-product="YSL Libre EDP 90ml">Falar no WhatsApp</a>
        </div>
      </article>

    </div>

    <!-- Vazio -->
    <div id="emptyState" class="hidden mt-10 text-center text-slate-600">
      <div class="inline-block px-4 py-2 rounded-full bg-slate-100 text-slate-700 font-medium">
        Nenhum produto encontrado para <span class="font-semibold" data-q></span>.
      </div>
      <div class="mt-3">
        <a href="tudo.html" class="text-blue-700 underline">Limpar filtros</a>
      </div>
    </div>
  </main>
  <!-- ===================== /GRID ===================== -->

  <footer class="mt-16">
  <div class="bg-gradient-to-r from-slate-900 via-slate-800 to-slate-700 text-slate-100">
    <div class="max-w-6xl mx-auto px-4 py-10 grid md:grid-cols-3 gap-8">
      <div>
        <div class="flex items-center gap-3">
          <img src="assets/logo-monogram-64.png" alt="" class="w-9 h-9 rounded-lg shadow-soft">
          <strong class="text-lg">Nando Importados</strong>
        </div>
        <p class="mt-3 text-slate-300 leading-relaxed">
          Modelos originais, novos e seminovos, com nota fiscal e garantia de 90 dias.
        </p>
        <div class="payment-logos mt-4 flex items-center gap-3 opacity-90">
          <img src="assets/perfumes/brand.svg" alt="Bandeiras" />
        </div>
      </div>

      <div>
        <h3 class="font-semibold text-slate-100">Atendimento</h3>
        <p class="mt-3 text-slate-300">Seg–Sáb • 9h às 20h<br>Rio de Janeiro – RJ</p>
        <a href="https://wa.me/5521976950809?text=Ol%C3%A1%20Nando!%20Vim%20pelo%20site%20e%20preciso%20de%20um%20or%C3%A7amento.%20Pode%20me%20atender%3F"
           target="_blank" rel="noopener"
           class="inline-flex items-center gap-2 mt-4 px-4 py-2 rounded-full bg-emerald-500 text-white font-semibold hover:brightness-110">
          Falar no WhatsApp
        </a>
      </div>

      <div>
        <h3 class="font-semibold text-slate-100">Links</h3>
        <ul class="mt-3 space-y-2 text-slate-300">
          <li><a class="hover:text-white" href="index.html">Início</a></li>
          <li><a class="hover:text-white" href="tudo.html">Catálogo completo</a></li>
          <li><a class="hover:text-white" href="celulares.html">Celulares</a></li>
          <li><a class="hover:text-white" href="perfumes.html">Perfumes</a></li>
          <li><a class="hover:text-white" href="condicoes.html">Políticas</a></li>
        </ul>
      </div>
    </div>

    <div class="border-t border-white/10">
      <div class="max-w-6xl mx-auto px-4 py-6 flex items-center justify-between text-slate-300">
        <span class="copyright">© 2025 Nando Importados — NF e garantia.</span>
        <a class="hover:text-white" href="condicoes.html">Políticas</a>
      </div>
    </div>
  </div>
</footer>


  <!-- ===================== SCRIPTS ===================== -->
  <script>
    // CTA WhatsApp (hero)
    (function waHero(){
      const a = document.querySelector('a[data-wa]');
      if(!a) return;
      const msg = `Olá, Nando! Vim pelo site (página: Catálogo completo). Pode me ajudar a escolher?`;
      a.href = `https://wa.me/5521976950809?text=${encodeURIComponent(msg)}`;
      a.target = "_blank"; a.rel = "noopener";
    })();

    // Util
    function moneyToNumber(txt){ return Number(String(txt||'').replace(/[^\d]/g,'')) || 0; }

    // Filtros / busca / ordenação
    (function filtros(){
      const params   = new URLSearchParams(location.search);
      const qParam   = (params.get('q') || '').trim().toLowerCase();
      const catParam = (params.get('cat') || 'all').toLowerCase();
      const brandParam = (params.get('brand') || 'all').toLowerCase();
      const sortParam  = (params.get('sort') || 'featured');

      const grid   = document.getElementById('gridProdutos');
      const cards  = Array.from(grid.querySelectorAll('article.offer-card'));
      const countEl= document.getElementById('countVisible');
      const empty  = document.getElementById('emptyState');
      const qHolders = document.querySelectorAll('[data-q]');

      // Controles
      const search = document.getElementById('search');
      const sort   = document.getElementById('sort');
      const brand  = document.getElementById('brand');
      const chipsCat = Array.from(document.querySelectorAll('.chip[data-cat]'));

      // Estado
      let activeQuery = qParam;
      let activeCat   = catParam;
      let activeBrand = brandParam;

      // Inicial
      if (qParam) {
        search.value = qParam;
        qHolders.forEach(el => el.textContent = qParam);
      }
      chipsCat.forEach(c => c.classList.toggle('active', c.getAttribute('data-cat') === activeCat));
      brand.value = brandParam;
      sort.value  = sortParam;

      // Exibir/ocultar marcas por categoria
      function refreshBrandVisibility(){
        const opts = Array.from(brand.querySelectorAll('option[value!="all"]'));
        opts.forEach(o => {
          const forCat = o.getAttribute('data-for');
          o.hidden = !!(forCat && activeCat !== 'all' && forCat !== activeCat);
        });
        // se opção selecionada ficou oculta, volta para "all"
        if (brand.options[brand.selectedIndex]?.hidden) brand.value = 'all';
      }
      refreshBrandVisibility();

      // Eventos
      chipsCat.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          activeCat = btn.getAttribute('data-cat') || 'all';
          chipsCat.forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          refreshBrandVisibility();
          aplicar();
        });
      });

      brand.addEventListener('change', ()=>{ activeBrand = brand.value || 'all'; aplicar(); });

      let t; search.addEventListener('input', ()=>{
        clearTimeout(t);
        t = setTimeout(()=>{ activeQuery = (search.value||'').trim().toLowerCase(); aplicar(); }, 180);
      });

      sort.addEventListener('change', aplicar);

      function aplicar(){
        // ordenação
        const sorted = cards.slice().sort((a,b)=>{
          const pa = Number(a.getAttribute('data-price')) || moneyToNumber(a.querySelector('.text-xl')?.textContent);
          const pb = Number(b.getAttribute('data-price')) || moneyToNumber(b.querySelector('.text-xl')?.textContent);
          const da = new Date(a.getAttribute('data-new') || '2000-01-01').getTime();
          const db = new Date(b.getAttribute('data-new') || '2000-01-01').getTime();
          switch (sort.value){
            case 'price-asc': return pa - pb;
            case 'price-desc': return pb - pa;
            case 'newest': return db - da;
            default: return 0;
          }
        });
        sorted.forEach(card => grid.appendChild(card));

        // filtros
        let visible = 0;
        cards.forEach(card=>{
          const cat   = (card.getAttribute('data-cat') || '').toLowerCase();
          const br    = (card.getAttribute('data-brand') || '').toLowerCase();
          const hay   = (card.getAttribute('data-search') || '').toLowerCase();

          const passCat   = activeCat==='all' ? true : (cat===activeCat);
          const passBrand = activeBrand==='all' ? true : (br===activeBrand);
          const passQuery = activeQuery ? hay.includes(activeQuery) : true;

          const show = passCat && passBrand && passQuery;
          card.style.display = show ? '' : 'none';
          if (show) visible++;
        });

        countEl.textContent = visible;
        empty.classList.toggle('hidden', visible !== 0);
        qHolders.forEach(el => el.textContent = activeQuery || '');
      }

      aplicar();
    })();

    // Links de WhatsApp por produto com mensagem contextual
    (function waProdutos(){
      const links = document.querySelectorAll('a.btn-wa[data-wa-product]');
      links.forEach(a => {
        const name = a.getAttribute('data-wa-product') || 'Produto';
        const msg = `Olá, Nando! Vim pelo site (página: Catálogo completo) e me interessei por: ${name}. Pode me atender?`;
        a.href = `https://wa.me/5521976950809?text=${encodeURIComponent(msg)}`;
        a.target = "_blank"; a.rel = "noopener";
        a.className = "inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-full text-white font-extrabold border border-white/30 shadow-[0_12px_28px_rgba(16,185,129,.35)] bg-[conic-gradient(at_50%_50%,#16a34a,#10b981,#06b6d4,#16a34a)] hover:brightness-110 transition";
      });
    })();
  </script>
  <script src="assets/js/produtos.js"></script>

  <!-- Alias do catálogo: garante compat e padronização -->
  <script>
    (function(){
      if (!window.NandoCatalog) window.NandoCatalog = {};
      if (typeof window.NandoCatalog.renderCatalogFull !== 'function'
          && typeof window.NandoCatalog.renderCatalogSimple === 'function') {
        window.NandoCatalog.renderCatalogFull = (cfg) =>
          window.NandoCatalog.renderCatalogSimple({ ...cfg, categoria: 'tudo' });
      }
    })();
  </script>

<script>
  // tudo.html — catálogo completo com filtros
  NandoCatalog.renderCatalogFull({
    pageLabel: 'Catálogo completo',
    initialCat: 'all'
  });
</script>

<!-- Carrossel da categoria (auto + touch + dots) -->
<script>
  (function catHeroCarousel(){
    const root = document.getElementById('catHero');
    if (!root) return;
    const slides = Array.from(root.querySelectorAll('#catHeroSlides > li'));
    const dots   = Array.from(root.querySelectorAll('.hero-dot'));
    let i = 0, timer = null, touch = {x:0}, hover=false;

    function show(n){
      i = (n + slides.length) % slides.length;
      slides.forEach((el, idx) => el.style.opacity = idx === i ? '1' : '0');
      dots.forEach((d, idx) => d.setAttribute('aria-current', idx === i ? 'true' : 'false'));
    }
    function play(){
      clearInterval(timer);
      timer = setInterval(()=>{ if(!hover) show(i+1); }, 5000);
    }

    dots.forEach((d, idx)=> d.addEventListener('click', ()=>{ show(idx); play(); }));
    root.addEventListener('mouseenter', ()=>{ hover = true; });
    root.addEventListener('mouseleave', ()=>{ hover = false; });

    // swipe em touch
    root.addEventListener('touchstart', e => { touch.x = e.touches[0].clientX; }, {passive:true});
    root.addEventListener('touchend',   e => {
      const dx = e.changedTouches[0].clientX - touch.x;
      if (Math.abs(dx) > 40){ show(i + (dx < 0 ? 1 : -1)); play(); }
    }, {passive:true});

    show(0); play();
  })();
</script>
</body>
</html>
